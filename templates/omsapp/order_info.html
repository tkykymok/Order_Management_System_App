{% extends "base.html" %}
{% load humanize %}
{% load utils %}

{% block content %}

<div class="container-fluid">
        <div  class="col">
             <div class="ml-2 mt-3 mb-3"><h2>Order List</h2></div>
                <table id="orderListTable" class="table table-sm bg-light table-bordered table-striped">
                <tr>
                    <th>PRJ Code</th>
                    <th>Order N/O</th>
                    <th>Customer</th>
                    <th>Item Code</th>
                    <th>Item Description</th>
                    <th>Maker P/N</th>
                    <th>B/P</th>
                    <th>S/P</th>
                    <th>Qty</th>
                    <th>Shipped</th>
                    <th>Received</th>
                    <th>Balance</th>
                    <th>Supp Del Date</th>
                    <th>Cust Del Date</th>
                    <th>Supplier</th>
                    <th>PIC</th>
                    <th></th>
                </tr>
                {% for order in order_list %}
                <tr id="order-{{order.id}}" class="orderList" data-id="{{order.id}}">
                    <td>{{ order.item_code.prj_code }}</td>
                    <td>{{ order.order_number }}</td>
                    <td>{{ order.item_code.customer }}</td>
                    <td>{{ order.item_code }}</td>
                    <td>{{ order.item_code.parts_name }}</td>
                    <td>{{ order.item_code.parts_number }}</td>
                    <td>¥{{ order.item_code.buy_price }}</td>
                    <td>¥{{ order.item_code.sell_price }}</td>
                    <td id="qty-{{order.id}}">{{ order.quantity | intcomma }}</td>
                    <td>{{ order.shipping_qty | intcomma}}</td>
                    <td>{{ order.receiving_qty | intcomma}}</td>
                    <td>{{ order.balance | intcomma }}</td>
                    <td id="suppDelDate-{{order.id}}">{{ order.supplier_delivery_date | date:"Y-m-j" }}</td>
                    <td id="custDelDate-{{order.id}}">{{ order.customer_delivery_date| date:"Y-m-j" }}</td>
                    <td>{{ order.item_code.supplier }}</td>
                    <td>{{ order.order_number.user}}</td>
                    <td class="text-center" ><button id="" type="button" class="btn btn-sm btn-info update" data-id="{{order.id}}" data-toggle="modal" data-target="#updateModal" href="">Update</button></td>
                </tr>
                {% endfor %}
                </table>
        </div>
</div>

<!-- Modal -->
<div class="modal fade" id="updateModal" tabindex="-1" role="dialog" aria-labelledby="updateModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-custom" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateModalLabel">Order Update</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form id="orderUpdateForm" action="" method="POST"> {% csrf_token %}                         
            <div class="modal-body">
                <table id="orderUpdateTable" class="table table-bordered bg-light"  width="100">
                    <thead>
                        <tr class="text-center">
                            <th>ID</th>    
                            <th>Supplier Delivery date</th>    
                            <th>Customer Delivery date</th>
                            <th>QTY</th>
                            <th>Delete</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button id="close" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <!-- <button id="deleteOrder" type="button" class="btn btn-danger" data-dismiss="modal" >Delete</button> -->
                <button id="updateConfirm" type="button" class="btn btn-primary" data-dismiss="modal" >Confirm</button>
            </div>
            </form>
        </div>
    </div>
</div>





{% endblock %}


    